var ot=Object.defineProperty;var lt=(i,t,e)=>t in i?ot(i,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):i[t]=e;var L=(i,t,e)=>(lt(i,typeof t!="symbol"?t+"":t,e),e);import{S as W,i as q,s as J,e as w,k as G,c as p,a as R,d as m,m as S,b,g as y,F as v,X as V,t as O,h as T,j as ct,M as ut,N as ht,O as At,q as I,o as U,l as H,n as ft,p as dt,a0 as mt,L as gt,w as vt,x as wt,y as pt,B as Rt,v as bt,C as Y,a1 as j,a2 as P,E as Bt,a3 as yt,I as zt}from"./index-d3eca301.js";import{c as M}from"./singletons-d1fb5791.js";import{s as Mt}from"./toast-35e741ba.js";M.disable_scroll_handling;const Z=M.goto;M.invalidate;M.prefetch;M.prefetch_routes;M.before_navigate;M.after_navigate;/*! @gera2ld/jsx-dom v2.1.1 | ISC License */var $=1,tt=2,z=1,et=4,Et="http://www.w3.org/2000/svg",k="http://www.w3.org/1999/xlink",Ct={show:k,actuate:k,href:k},Qt=function(t){return typeof t=="string"||typeof t=="number"},_t=function(t){return(t==null?void 0:t.vtype)===$},It=function(t){return(t==null?void 0:t.vtype)===tt};function C(i,t){var e;if(typeof i=="string")e=$;else if(typeof i=="function")e=tt;else throw new Error("Invalid VNode type");return{vtype:e,type:i,props:t}}var it=C;function xt(i){return i.children}var Gt={isSvg:!1};function D(i,t){if(t.type===z)t.node!=null&&i.append(t.node);else if(t.type===et)t.children.forEach(function(e){D(i,e)});else throw new Error("Unkown ref type "+JSON.stringify(t))}function St(i,t,e){for(var s in t)s==="key"||s==="children"||s==="ref"||(s==="dangerouslySetInnerHTML"?i.innerHTML=t[s].__html:s==="innerHTML"||s==="textContent"||s==="innerText"?i[s]=t[s]:s.startsWith("on")?i[s.toLowerCase()]=t[s]:Ot(i,s,t[s],e.isSvg))}var Nt={className:"class",labelFor:"for"};function Ot(i,t,e,s){if(t=Nt[t]||t,e===!0)i.setAttribute(t,"");else if(e===!1)i.removeAttribute(t);else{var n=s?Ct[t]:void 0;n!==void 0?i.setAttributeNS(n,t,e):i.setAttribute(t,e)}}function _(i,t){if(t===void 0&&(t=Gt),i==null||typeof i=="boolean")return{type:z,node:null};if(i instanceof Node)return{type:z,node:i};if(It(i)){var e=i,s=e.type,n=e.props;if(s===xt){var a=document.createDocumentFragment();if(n.children){var r=_(n.children,t);D(a,r)}return{type:z,node:a}}var l=s(n);return _(l,t)}if(Qt(i))return{type:z,node:document.createTextNode(""+i)};if(_t(i)){var o,h=i,A=h.type,g=h.props;!t.isSvg&&A==="svg"&&(t=Object.assign({},t,{isSvg:!0})),t.isSvg?o=document.createElementNS(Et,A):o=document.createElement(A),St(o,g,t);var c;if(g.children){var u=t;t.isSvg&&A==="foreignObject"&&(u=Object.assign({},u,{isSvg:!1})),c=_(g.children,u)}c!=null&&D(o,c);var d=g.ref;return typeof d=="function"&&d(o),{type:z,node:o}}if(Array.isArray(i))return{type:et,children:i.map(function(f){return _(f,t)})};throw new Error("mount: Invalid Vnode!")}function st(i){for(var t=[],e=0;e<i.length;e+=1){var s=i[e];Array.isArray(s)?t=t.concat(st(s)):s!=null&&t.push(s)}return t}function nt(i){return i.type===z?i.node:i.children.map(nt)}function rt(i){return Array.isArray(i)?st(i.map(rt)):nt(_(i))}/*! markmap-toolbar v0.13.2 | MIT License */function F(){return F=Object.assign||function(i){for(var t=1;t<arguments.length;t++){var e=arguments[t];for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&(i[s]=e[s])}return i},F.apply(this,arguments)}function Tt(){return it("div",{className:"mm-toolbar-brand",children:[C("img",{alt:"markmap",src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAACoFBMVEUAAAAAAAD//wAAAACAgAD//wAAAABVVQCqqgBAQACAQACAgABmZgBtbQAAAABgQABgYAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAaFQAAAAAAAAAAAAAAAAAHAAARBQIdGAIYEwI/OgJYUQUfHQI+OgJDPgJJRARBPQRJQgRRSwRRTQRIQQRUTgRUUARZUgRSTQRPSQRjWgZORQRfWQZsZAhTTQRNRwRWUAZkXAZOSARUTgZPRwRRSQRoYwZWUQZWTgRbUwZmXQZoXghmXwdqYwdsYwdfVwVmXQdqYgdiWgVpYAl3bgl6cgl4cAqLggw8OAOWjA2Uig1OSAR2bQihlg55cAh5cAh6cQmMgwyOhAyUjA2QhQ2Uiw2Viw2soBCflA+voxGwpRGhlg+hlg+snxGroBGjmBCpnBC0pxKyphKxpRG2qhK0qBK5rBK5rBP/7h3/8B7/8R3/8h3/8R7/8h786x397B3+7R3EtxT66Rz66hz76hz86xz96xz97Bz+7Rz45xz56Bz76hz97Bz97B3MvRX15Rv25Rv45xz66Rz76hz97B3+7R3IuxX05Bv15Bv25Rz56Bz66Ry/sxPAsxPCtRTCthTNvxbZyxfczxfi0xjl1Rnn2Bnr2xrr3Brs3Rru3Rru3xrv3hrw3xrx4Bvx4Rvy4hvz4hvz4xv04xv05Bv14xv15Bv15Rv25Bv25Rv25Rz25hv35hv35xv45xv45xz55xz56Bv56Bz66Rv66Rz76Rv76Rz76hz86hv86xz+7h3/7R3/7h3/7x3/8B3/8B7/8R3/8R4Yqhj5AAAAq3RSTlMAAQECAgIDAwMEBAQFBwgICAwQERITFRYXGBkbHB0eHyQlJyguNTg8RUZISU5PV2FiY2RlZmdqa2xubnJzc3R2d3d3eXl5eXp7fH1+gIGCgoKDg4SEhIWGh4eHiYmJjIyMjZSUlJ+sra+zt7i4uru8ztHV1tbW2d7g4OHi4uPk5ufp7Ozv9fX29/f3+Pj6+vr7+/v7+/v7+/z8/Pz8/f39/f39/f3+/v7+/v7K6J1dAAACHklEQVQ4y2NgwAoYWdi5uLm5GXHIcrLCmMzYpDmAhKCKjoGtp40MFhVsDAwSxmmVEzZu2XvqSLkchjw3g0h445Ybd24vmTN1Usd5X3R5DgaNqgN35sycP2/GxMkTMRVwMOivvtO3YsWUm3duX790EcMKdgbNNXdnnJh1+9T6ipzU+FB0RzIyiFYB5WdfaElUF8TmTQ6GwH39J2bvypMHcpg4MAKKkUGo5s6KWRfyGRh4WJClGEGBCgS8DLobliy/3abMwM8NBYwQjXDgf3ryxOspyKYyg+RFTFwdnYDAzbrw+oLFm9Ot3J3AwNHFTBykQrhg++GDh48cOXzk4P6VZy8s230MyAGCwwcP7iyRBJpiur1n8hQIWHX27NkLi6bAwOSuow5ABeY7OydOhoCFIAULe6E8YFCf8QAqEC86evniZTA4tfLsuRXHr0E4ly9ePF0uC3KnpH1MZBQQxPoVgxyZ5RMdBQaRMc6yIEcihWbQGaA3k9G8CfQoN0pAtSoxCMACihk9qGtBQZ2LHtRIkRUMiqwd2TJADiswsrjQlAGju/o+MLrPNkWo8mFN1ewMWmvBCebQ0rKMJG87QzF0FRwMRuvugpLcrXu3rp7Zs61UCtMZ2nVHbk+fMX/+jMmTp3Sf9MLiULG45q237txaPG3yxPYrYQzYMo60RWbD3E27Ll68Uq+AK+uJqOlZBiSEKGLNnMA0iDfzwrI/NKgBOivk9piPdtUAAAAASUVORK5CYII="}),C("a",{href:"https://markmap.js.org/",children:"markmap"})]})}function Ut({title:i,content:t,onClick:e}){return C("div",{className:"mm-toolbar-item",title:i,onClick:e,children:t})}let N;function Ft(i){return async(...t)=>{if(!N){N=i(...t);try{await N}finally{N=null}}}}class B{static create(t){const e=new B;return e.attach(t),e.render()}static icon(t,e={}){return e=F({stroke:"none",fill:"currentColor","fill-rule":"evenodd"},e),C("svg",{width:"20",height:"20",viewBox:"0 0 20 20",children:C("path",F({},e,{d:t}))})}constructor(){this.showBrand=!0,this.registry={},this.markmap=null,this.items=["zoomIn","zoomOut","fit"],this.register({id:"zoomIn",title:"Zoom in",content:B.icon("M9 5v4h-4v2h4v4h2v-4h4v-2h-4v-4z"),onClick:this.getHandler(t=>t.rescale(1.25))}),this.register({id:"zoomOut",title:"Zoom out",content:B.icon("M5 9h10v2h-10z"),onClick:this.getHandler(t=>t.rescale(.8))}),this.register({id:"fit",title:"Fit window size",content:B.icon("M4 7h2v-2h2v4h-4zM4 13h2v2h2v-4h-4zM16 7h-2v-2h-2v4h4zM16 13h-2v2h-2v-4h4z"),onClick:this.getHandler(t=>t.fit())})}setBrand(t){this.showBrand=t}register(t){this.registry[t.id]=t}getHandler(t){return t=Ft(t),()=>{this.markmap&&t(this.markmap)}}setItems(t){this.items=[...t]}attach(t){this.markmap=t}render(){const t=this.items.map(e=>{if(typeof e=="string"){const s=this.registry[e];return s||console.warn(`[markmap-toolbar] ${e} not found`),s}return e}).filter(Boolean);return rt(it("div",{className:"mm-toolbar",children:[this.showBrand&&Tt(),t.map(Ut)]}))}}function K(i){let t,e,s,n,a,r,l,o,h,A=i[1]&&X(i);const g=i[4].default,c=gt(g,i,i[3],null);return{c(){t=w("div"),e=w("div"),s=G(),n=w("div"),A&&A.c(),a=G(),r=w("div"),c&&c.c(),this.h()},l(u){t=p(u,"DIV",{class:!0});var d=R(t);e=p(d,"DIV",{class:!0}),R(e).forEach(m),s=S(d),n=p(d,"DIV",{class:!0});var f=R(n);A&&A.l(f),a=S(f),r=p(f,"DIV",{class:!0});var Q=R(r);c&&c.l(Q),Q.forEach(m),f.forEach(m),d.forEach(m),this.h()},h(){b(e,"class","modal-backdrop"),b(r,"class","text-sm"),b(n,"class","modal-content"),b(t,"class","modal")},m(u,d){y(u,t,d),v(t,e),v(t,s),v(t,n),A&&A.m(n,null),v(n,a),v(n,r),c&&c.m(r,null),l=!0,o||(h=V(e,"click",i[2]),o=!0)},p(u,d){u[1]?A?A.p(u,d):(A=X(u),A.c(),A.m(n,a)):A&&(A.d(1),A=null),c&&c.p&&(!l||d&8)&&ut(c,g,u,u[3],l?At(g,u[3],d,null):ht(u[3]),null)},i(u){l||(I(c,u),l=!0)},o(u){U(c,u),l=!1},d(u){u&&m(t),A&&A.d(),c&&c.d(u),o=!1,h()}}}function X(i){let t,e;return{c(){t=w("div"),e=O(i[1]),this.h()},l(s){t=p(s,"DIV",{class:!0});var n=R(t);e=T(n,i[1]),n.forEach(m),this.h()},h(){b(t,"class","text-center text-lg font-semibold mb-2")},m(s,n){y(s,t,n),v(t,e)},p(s,n){n&2&&ct(e,s[1])},d(s){s&&m(t)}}}function kt(i){let t,e,s=i[0]&&K(i);return{c(){s&&s.c(),t=H()},l(n){s&&s.l(n),t=H()},m(n,a){s&&s.m(n,a),y(n,t,a),e=!0},p(n,[a]){n[0]?s?(s.p(n,a),a&1&&I(s,1)):(s=K(n),s.c(),I(s,1),s.m(t.parentNode,t)):s&&(ft(),U(s,1,1,()=>{s=null}),dt())},i(n){e||(I(s),e=!0)},o(n){U(s),e=!1},d(n){s&&s.d(n),n&&m(t)}}}function Vt(i,t,e){let{$$slots:s={},$$scope:n}=t,{show:a=!1}=t,{title:r}=t;const l=mt();function o(){l("close")}return i.$$set=h=>{"show"in h&&e(0,a=h.show),"title"in h&&e(1,r=h.title),"$$scope"in h&&e(3,n=h.$$scope)},[a,r,o,n,s]}class Dt extends W{constructor(t){super(),q(this,t,Vt,kt,J,{show:0,title:1})}}function Lt(i){let t,e,s,n,a,r,l,o,h,A,g;return{c(){t=w("p"),e=O("You should save them in Gist or other file services. Do you still want to continue?"),s=G(),n=w("div"),a=w("a"),r=O("Cancel"),l=G(),o=w("a"),h=O("OK"),this.h()},l(c){t=p(c,"P",{});var u=R(t);e=T(u,"You should save them in Gist or other file services. Do you still want to continue?"),u.forEach(m),s=S(c),n=p(c,"DIV",{class:!0});var d=R(n);a=p(d,"A",{});var f=R(a);r=T(f,"Cancel"),f.forEach(m),l=S(d),o=p(d,"A",{class:!0});var Q=R(o);h=T(Q,"OK"),Q.forEach(m),d.forEach(m),this.h()},h(){b(o,"class","text-gray-500"),b(n,"class","modal-footer")},m(c,u){y(c,t,u),v(t,e),y(c,s,u),y(c,n,u),v(n,a),v(a,r),v(n,l),v(n,o),v(o,h),A||(g=[V(a,"click",P(i[2])),V(o,"click",P(i[3]))],A=!0)},p:Bt,d(c){c&&m(t),c&&m(s),c&&m(n),A=!1,yt(g)}}}function Ht(i){let t,e,s,n,a;return n=new Dt({props:{show:i[1],title:"Your changes will be lost!",$$slots:{default:[Lt]},$$scope:{ctx:i}}}),n.$on("close",i[2]),{c(){t=w("div"),s=G(),vt(n.$$.fragment),this.h()},l(r){t=p(r,"DIV",{class:!0}),R(t).forEach(m),s=S(r),wt(n.$$.fragment,r),this.h()},h(){b(t,"class",e=i[4].class)},m(r,l){y(r,t,l),i[9](t),y(r,s,l),pt(n,r,l),a=!0},p(r,[l]){(!a||l&16&&e!==(e=r[4].class))&&b(t,"class",e);const o={};l&2&&(o.show=r[1]),l&8192&&(o.$$scope={dirty:l,ctx:r}),n.$set(o)},i(r){a||(I(n.$$.fragment,r),a=!0)},o(r){U(n.$$.fragment,r),a=!1},d(r){r&&m(t),i[9](null),r&&m(s),Rt(n,r)}}}function Yt(i,t,e){let s,{mm:n}=t,{dirty:a}=t,{showBrand:r=!1}=t,{isFull:l=!1}=t,o=!1;const h=new B;h.setBrand(r),h.register({id:"repl",title:"Open in REPL",content:B.icon("M4 5v10h12v-10zM6 7v6h3v-6zM14 7v6h-3v-6z"),onClick:u}),h.register({id:"full",title:"Full page view",content:B.icon("M4 9v-4h4v2h-2v2zM4 11v4h4v-2h-2v-2zM16 9v-4h-4v2h2v2zM16 11v4h-4v-2h2v-2z"),onClick:A}),h.setItems(["zoomIn","zoomOut","fit",l?"repl":"full"]),bt(()=>{s.append(h.render())});function A(){a?e(1,o=!0):c()}function g(){e(1,o=!1)}function c(){Z("/full"+window.location.hash)}function u(){Z("/repl"+window.location.hash)}function d(f){zt[f?"unshift":"push"](()=>{s=f,e(0,s)})}return i.$$set=f=>{e(4,t=Y(Y({},t),j(f))),"mm"in f&&e(5,n=f.mm),"dirty"in f&&e(6,a=f.dirty),"showBrand"in f&&e(7,r=f.showBrand),"isFull"in f&&e(8,l=f.isFull)},i.$$.update=()=>{i.$$.dirty&32&&h.attach(n)},t=j(t),[s,o,g,c,t,n,a,r,l,d]}class te extends W{constructor(t){super(),q(this,t,Yt,Ht,J,{mm:5,dirty:6,showBrand:7,isFull:8})}}const E=class{constructor(t,e){this.type=t,this.data=e,this.desc=E.descriptions[t]||"Unknown"}isValidGist(){return this.type==="gist"&&/^\w+\//.test(this.data)}asUrl(){switch(this.type){case"gist":if(!this.isValidGist())throw new Error("Gist owner is missing");const[t,e]=this.data.split(":");return`https://gist.githubusercontent.com/${t}/raw/${e||"markmap.md"}`;case"github":const[s,n]=this.data.split(":"),[a,r]=s.split("@");return`https://raw.githubusercontent.com/${a}/${r||"main"}/${n||"README.md"}`;default:return this.data}}asData(){switch(this.type){case"gist":case"github":return`${this.type}:${this.data}`;default:return this.data}}async load(){const t=await this.asUrl(),e=await fetch(t);return at(e),e.text()}static parseSync(t){if(t instanceof E)return t;let e,s;for(const n of["gist","github"])if(t.startsWith(`${n}:`)){e=n,s=t.slice(n.length+1);break}if(!e){const n=new URL(t);if(n.origin==="https://raw.githubusercontent.com"){const[,a,r,l,...o]=n.pathname.split("/");e="github",s=[`${a}/${r}`,l&&`@${l}`,o.length&&`:${o.join("/")}`].filter(Boolean).join("")}else if(n.origin==="https://gist.githubusercontent.com"||n.origin==="https://gist.github.com"){const[,a,r,l,...o]=n.pathname.split("/");e="gist",s=[`${a}/${r}`,o.length&&`${o.join("/")}`].filter(Boolean).join(":")}}return e||(e=/^https?:\/\/./.test(t)&&"url",s=t),new E(e,s)}static async parse(t){const e=E.parseSync(t);if(e.type==="gist"&&!e.isValidGist()){const[s]=e.data.split(":"),n=await Zt(s);e.data=`${n}/${e.data}`}return e}};let x=E;L(x,"descriptions",{gist:"GitHub Gist",github:"GitHub Raw",url:"URL"});const jt=x.parseSync("gist:gera2ld/af76a4c245b302206b16aec503dbe07b");function Pt(i){return i.replace(/[<&]/g,t=>({"<":"&lt;","&":"&amp;"})[t])}function at(i){if(!i.ok)throw new TypeError(`Failed to fetch, got response "${i.status} ${i.statusText}"`);return i}async function Zt(i){const t=await fetch(`https://api.github.com/gists/${i}`,{headers:{Accept:"application/vnd.github.v3+json"}});return at(t),(await t.json()).owner.login}async function Kt(i){return(await x.parse(i)).load()}function Xt(i){let t;async function e(){const s={};t=s;const n=new URLSearchParams(window.location.hash.slice(1));let a=n.get("gist");const r=n.get("d");if(a&&!r){a.includes(":")||(a=`gist:${a}`);const h=`#?d=${a}`;await Promise.resolve(),window.location.hash=h;return}let l,o;try{o=await Kt(r||jt)}catch(h){l=h}if(s===t&&(o&&i(o),l))if(l.name==="TypeError"&&/failed to fetch/i.test(l.message))Mt({title:"Failed to fetch",html:['<div class="mt-1">Please check your network and resource</div>',r&&`<div class="mt-1 text-xs text-gray-600">${Pt(r)}</div>`].filter(Boolean).join("")});else throw l}return e}function ee(i){const t=Xt(i);return window.addEventListener("hashchange",t),t(i),()=>window.removeEventListener("hashchange",t)}export{Dt as M,te as T,x as U,jt as d,Kt as l,ee as s};
